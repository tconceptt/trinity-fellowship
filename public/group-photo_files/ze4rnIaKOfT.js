;/*FB_PKG_DELIM*/

__d("CometContextualLayer.react",["BaseContextualLayer.react","react","useCometVisualChangeTracker","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=r("useCometVisualChangeTracker")(),i=r("useMergeRefs")(n,a);return u.jsx(r("BaseContextualLayer.react"),babelHelpers.extends({},o,{ref:i}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("CometInternalTypeaheadFetchContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({fetch:r("emptyFunction"),isLoading:!1,refetch:r("emptyFunction"),source:"all"});l.default=u}),98);
__d("CometInternalTypeaheadStateContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({activeEntries:[],highlightedEntry:null,highlightedEntrySource:null,secondaryActionHighlighted:null});l.default=u}),98);
__d("getPeopleTypeaheadNullStateText",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";function e(){return s._(/*BTDS*/"No people found")}l.default=e}),226);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["FDSText.react","getPeopleTypeaheadNullStateText","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){return s.jsx("div",{className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k",children:s.jsx(r("FDSText.react"),{align:"center",color:"secondary",type:"body2",children:r("getPeopleTypeaheadNullStateText")()})})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("cometTypeaheadKeyboardNavigationUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){var o,a;if(e.length===0){n(null,null);return}var i=t!=null?e.findIndex(function(e){return e.key===t})+1:0;i===e.length&&(i=0);var l=(o=(a=e[i])==null?void 0:a.hasSecondaryAction)!=null?o:!1;n(e[i],l?r:null)}function l(e,t,n,r){var o,a;if(e.length===0){n(null,null);return}var i=t!=null?e.findIndex(function(e){return e.key===t})-1:e.length-1;i===-1&&(i=e.length-1);var l=(o=(a=e[i])==null?void 0:a.hasSecondaryAction)!=null?o:!1;n(e[i],l?r:null)}function s(e,t,n,r){if(e.length===0){n(null,!1);return}if(r===!0){var o=e.findIndex(function(e){return e.key===t});n(e[o],!1)}else l(e,t,n,!0)}function u(t,n,r,o){if(t.length===0){r(null,!1);return}if(o===!0)e(t,n,r,!1);else{var a=t.findIndex(function(e){return e.key===n});r(t[a],!0)}}i.moveDown=e,i.moveUp=l,i.moveLeft=s,i.moveRight=u}),66);
__d("cometTypeaheadODSLogFetchCacheEvent",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchCacheEvent");function s(t,n,r){n===void 0&&(n=!0),r===void 0&&(r=1),n&&e.onReady(function(e){e.bumpEntityKey(354,t,"fetched-cache",r)})}l.default=s}),98);
__d("cometTypeaheadODSLogFetchNetworkEvent",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchNetworkEvent");function s(t,n,r){n===void 0&&(n=!0),r===void 0&&(r=1),n&&e.onReady(function(e){e.bumpEntityKey(354,t,"fetched-network",r)})}l.default=s}),98);
__d("useBaseTypeaheadDataSourceFetchResolverCache",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.dataSource;return s(function(e){var n=e.onResolvePayload,r=e.requestParams,o=r.perfTraceAPI,a=t.fetchCache(r);return o&&o.addMarkerPoint("cachedResponse","AppTiming"),n(a),a},[t])}l.default=u}),98);
__d("useBaseTypeaheadDataSourceFetchResolverNetwork",["promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e){var t=e.dataSource,n=m(!1),o=n[0],a=n[1],i=d(0),l=d(!1);c(function(){return l.current=!1,function(){l.current=!0}},[]);var s=u(function(e){var n=e.onResolvePayload,o=e.requestParams;i.current++;var s=i.current,u=o.perfTraceAPI;a(!0),r("promiseDone")(t.fetchNetwork(o).then(function(e){!l.current&&s===i.current&&(n(e),u&&u.addMarkerPoint("networkResponse","AppTiming"))}).finally(function(){!l.current&&s===i.current&&(i.current=0,a(!1))}))},[t]);return[{isLoading:o},s]}l.default=p}),98);
__d("useBaseTypeaheadDataSourceFetchResolver",["FBLogger","baseTypeaheadFlattenEntries","cometTypeaheadODSLogFetchCacheEvent","cometTypeaheadODSLogFetchNetworkEvent","emptyObject","react","useBaseTypeaheadDataSourceFetchResolverCache","useBaseTypeaheadDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=8;function m(e,t){var n=e.dataSource,o=e.dataSourceFetchConfigParams,a=e.onResolvePayload,i=o!=null?o:r("emptyObject"),l=i.renderLimit,s=l===void 0?d:l,m=i.bypassCacheRenderLimitCheck,p=m===void 0?!1:m,_=i.shouldDebounceNetwork,f=_===void 0?!0:_,g=i.networkDebounceWaitDuration,h=i.requestFlow,y=c(h),C=r("useBaseTypeaheadDataSourceFetchResolverCache")({dataSource:n}),b=r("useBaseTypeaheadDataSourceFetchResolverNetwork")({dataSource:n}),v=b[0].isLoading,S=b[1],R=r("useDebouncedComet")(S,{wait:g});function L(){var e=!1;function o(t,n){var o=n.isTraceComplete,i=n.source;try{e||a(t,{isTraceComplete:o,source:i})}catch(t){e||r("FBLogger")("search").mustfix("Failed to resolve fetched payload")}}function i(e){var t=e.requestParams,a=e.source,i=t.requestFlow;i!=null&&(y.current=i);var l=null;if(typeof n.fetchCache=="function"&&["all","cache"].includes(a)){l=C({onResolvePayload:function(t){var e=t.entries,n=r("baseTypeaheadFlattenEntries")(e).length;o(t,{isTraceComplete:!p&&n>=s,source:"cache"}),r("cometTypeaheadODSLogFetchCacheEvent")&&r("cometTypeaheadODSLogFetchCacheEvent")("comet.ta.fetch",!0,1)},requestParams:t});var u=l,c=u.entries,d=r("baseTypeaheadFlattenEntries")(c).length;if(!p&&d>=s)return}if(typeof n.fetchNetwork=="function"&&["all","network"].includes(a)){var m={onResolvePayload:function(t){o(t,{isTraceComplete:!0,source:t.entries.length>0?"network":"network-no-results"}),r("cometTypeaheadODSLogFetchNetworkEvent")&&r("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},requestParams:babelHelpers.extends({},t,{requestFlow:y.current})};f?R(m):S(m)}}return t!=null&&i(t),function(){e=!0}}return u(L,[t]),[{isLoading:v}]}l.default=m}),98);
__d("useBaseTypeaheadDataSourceFetch",["FBLogger","react","useBaseTypeaheadDataSourceFetchResolver"],(function(t,n,r,o,a,i,l){"use strict";var e=["loggingEventTrace"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useState;function m(t){var n,o=d(null),a=o[0],i=o[1],l=r("useBaseTypeaheadDataSourceFetchResolver")(t,a),s=l[0].isLoading,u=c(function(e,t){t===void 0&&(t="all"),i({requestParams:e,source:t})},[]),m=c(function(t){var n=t||{},o=n.requestFlow,i=n.source;if(a==null){r("FBLogger")("search").mustfix("Refetch cannot be called with undefined `fetchParams`");return}var l=a.requestParams,s=l.loggingEventTrace,c=babelHelpers.objectWithoutPropertiesLoose(l,e),d=babelHelpers.extends({loggingEventTrace:babelHelpers.extends({},s,{sequenceID:String(Date.now())}),requestFlow:o},c);u(d,i)},[u,a]);return[{isLoading:s,source:(n=a==null?void 0:a.source)!=null?n:"all"},u,m]}l.default=m}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","useBaseTypeaheadDataSourceFetch"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","context","dataSource","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=c.useState;function g(t){var n=t.ref,a=t.context,i=t.dataSource,l=t.inputElement,s=t.layoutStrategyRenderer,c=t.loggingProvider,g=t.onAriaChange,y=t.onEntriesUpdated,C=t.onHighlightEntry,b=t.onSelectedEntry,v=t.onVisibilityChange,S=t.position,R=S===void 0?"above":S,L=t.queryString,E=t.viewStrategyRenderer,k=babelHelpers.objectWithoutPropertiesLoose(t,e),I=_(null),T=f(null),D=T[0],x=T[1],$=_([]),P=f($.current),N=P[0],M=P[1],w=f(!0),A=w[0],F=w[1],O=_(null),B=_(L);m(function(){B.current=L},[L]);var W=d(function(e){C&&C(e),x(e),I.current=e},[C]),q=r("useBaseTypeaheadDataSourceFetch")({dataSource:i,onResolvePayload:d(function(e){var t,n=e.entries;$.current=n,M(n);var o=r("baseTypeaheadFlattenEntries")(n),a=o[0],i=I==null||(t=I.current)==null?void 0:t.key;a!=null&&!o.map(function(e){return e.key}).includes(i)&&W(a),y&&y(n.length>0)},[W,y])}),U=q[0].isLoading,V=q[1],H=A&&(N.length>0||U);m(function(){return H?c.startSession(B.current):c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current)),v(H),function(){c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current))}},[v,c,H]),m(function(){F(!0),V({query:L})},[V,L,i]),p(n,function(){return{getViewRef:function(){return O},hasSelection:function(){return h(r("baseTypeaheadFlattenEntries")($.current),D)},moveDown:function(){o("cometTypeaheadKeyboardNavigationUtils").moveDown(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},moveUp:function(){o("cometTypeaheadKeyboardNavigationUtils").moveUp(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},select:function(){var e=r("baseTypeaheadFlattenEntries")($.current);b&&D!=null&&h(e,D)&&(c.isSessionActive()&&c.maybeEndSession(L,e,D),b(D))}}},[D,W,b,c,L]);var G=d(function(e){var t=r("baseTypeaheadFlattenEntries")($.current);b&&h(t,e)&&(c.isSessionActive()&&c.maybeEndSession(L,t,e),b(e))},[b,c,L]);return m(function(){if(H===!1)return;function e(e,t){for(var n=e.parentElement;n!=null&&n!==t;)n=n.parentElement;return n===t}var t=function(n){var t=n.target;if(t instanceof HTMLElement){var r=O.current,o=r!==null&&(t===r||e(t,r)),a=l!==null&&(t===l||e(t,l));F(o||a)}};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}},[l,H]),H?u.jsx(s,{ariaProps:{role:"listbox"},context:a,entries:N,highlightedEntry:D,isLoading:U,onAriaChange:g,onBlur:k.onBlur,onHighlightEntry:W,onPressEntry:G,onPressEntryIn:G,position:R,queryString:L,viewRef:O,viewStrategyRenderer:E}):null}g.displayName=g.name+" [from "+i.id+"]";function h(e,t){if(t==null)return!1;var n=t.key;return e.find(function(e){return e.key===n})!=null}l.default=g}),98);
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.anchor;if(n.type!=="text")return null;var r=n.getNode();if(t!=null&&!t()||t==null&&!r.isSimpleText())return null;var o=n.offset;return r.getTextContent().slice(0,o)}function s(t,n){return t.getEditorState().read(function(){var t=o("Lexical").$getSelection();return o("Lexical").$isRangeSelection(t)?e(t,n):null})}l.default=s}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=c(!1);u(function(){if(!n.current){var r=e.getRootElement()===document.activeElement;if(r){t(),n.current=!0;return}var a=e.registerCommand(o("Lexical").FOCUS_COMMAND,function(){return t(),n.current=!0,a(),!1},o("Lexical").COMMAND_PRIORITY_LOW);return a}},[t,e,n])}l.default=d}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("445"),s=o("FalcoLoggerInternal").create("mentions_session_end_without_click",e),u=s;l.default=u}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("446"),s=o("FalcoLoggerInternal").create("mentions_session_start",e),u=s;l.default=u}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("447"),s=o("FalcoLoggerInternal").create("mentions_suggestion_clicked",e),u=s;l.default=u}),98);
__d("WithTagSuggestionContinueClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3701"),s=o("FalcoLoggerInternal").create("with_tag_suggestion_continue_clicked",e),u=s;l.default=u}),98);
__d("CometMentionsLoggingProvider",["FBLogger","MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","WithTagSuggestionContinueClickedFalcoEvent","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=!1,this.$3=null,this.$1=e}var t=e.prototype;return t.getSessionID=function(){return this.$3==null&&r("FBLogger")("search").mustfix("Mentions logging sessionID does not exist."),this.$3},t.isSessionActive=function(){return this.$2},t.startSession=function(t){var e=this;if(t!=null){var n=r("guid")();this.$3=n,this.$2=!0,r("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers.extends({},e.$1,{session_id:n,typed_query:t})})}},t.maybeEndSession=function(t,n,o,a){if(t!=null){var e=n!=null?JSON.stringify(n.map(function(e){return{id:e.key}})):null,i=babelHelpers.extends({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:t});if(o!=null){var l,s=o.key,u=(l=n==null?void 0:n.findIndex(function(e){return e.key===s}))!=null?l:null,c=isNaN(parseInt(o.key,10))?"0":o.key;if(a===!0){r("WithTagSuggestionContinueClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})});return}else r("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})})}else r("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return i});this.$3=null,this.$2=!1}},e})();l.default=e}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function c(e){return e===void 0&&(e=u),s(function(){return new(r("CometMentionsLoggingProvider"))(e)},[e])}l.default=c}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.startTransition,c=s.useEffect,d=s.useState;function m(e,t){var n=window.getSelection();if(n===null||!n.isCollapsed||e===null)return!1;var r=n.anchorNode,o=e.leadOffset,a=n.anchorOffset;try{t.setStart(r,o),t.setEnd(r,a)}catch(e){return!1}return!0}function p(e,t,n){var o=d(null),a=o[0],i=o[1];return c(function(){var o=document.createRange(),a=null,l=null,s=null,c=function(){var c=o,d=r("getCometComposerMentionsSearchForLexical")(e,n);if(!(d===a||c===null)){a=d;var p=t(d),_=p.dataSource,f=p.searchResult;if(!(_===l&&f===s)){var g=m(f,c);l=_,s=f,u(!g||_===null||f===null?function(){return i(null)}:function(){i({dataSource:_,range:c,searchResult:f})})}}},d=e.registerUpdateListener(c);return c(),function(){o=null,d()}},[n,t,e]),a}l.default=p}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","react","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_=u.useState;function f(e){var t=e.$isValidSelection,n=e.createNodeStrategy,a=e.dataSourceResolverConfig,i=a.bootstrap,l=a.resolver,u=e.editor,m=e.layoutStrategyRenderer,_=e.mentionsHandlerForSelectedEntry,f=e.mentionsLoggerContext,h=e.onMentionsEntrySelected,b=e.position,v=b===void 0?"below":b,S=e.viewStrategyRenderer,R=r("useCometMentionsResolutionForLexical")(u,l,t),L=p(!1),E=g(u),k=E[0],I=E[1],T=p(null),D=C(u);r("useCometMentionsBootstrapForLexical")(u,i),d(function(){return u.registerCommand(o("Lexical").BLUR_COMMAND,function(){return D(),!1},o("Lexical").COMMAND_PRIORITY_LOW)},[u,D]);var x=c(function(){D()},[D]);d(function(){var e,t=[{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:(e=o("Lexical")).KEY_ENTER_COMMAND},{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:e.KEY_TAB_COMMAND},{handler:function(t){return t.moveUp(),!0},type:e.KEY_ARROW_UP_COMMAND},{handler:function(t){return t.moveDown(),!0},type:e.KEY_ARROW_DOWN_COMMAND},{handler:function(){return D(),I(),!0},type:e.KEY_ESCAPE_COMMAND}];return o("LexicalUtils").mergeRegister.apply(void 0,t.map(function(e){var t=e.handler,n=e.type;return u.registerCommand(n,function(e){var n=T.current,r=L.current;if(n===null||!r||k)return!1;if(t(n)){var o=e;return o.preventDefault(),o.stopPropagation(),!0}return!1},o("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[I,u,D,k]);var $=c(function(e){L.current=e},[]),P=c(function(e){e||D()},[D]),N=c(function(e){var o=r("getCometComposerMentionsSearchForLexical")(u,t);if(o==null){r("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var a=l(o),i=a.searchResult;if(i==null){r("FBLogger")("CometComposer").mustfix("onPressEntry was called and no search result was found for the query %s",o);return}D();var s=_==null?void 0:_(e);s!=null&&!s.shouldMentionSelectedEntry||(y(u,n,e,i,t),h==null||h(e),I())},[u,t,l,D,_,n,h,I]),M=r("useCometMentionsLoggingProvider")(f);return R===null||k?(D(),L.current=!1,null):s.jsx(r("CometMentions.react"),{context:R.range,dataSource:R.dataSource,inputElement:u.getRootElement(),layoutStrategyRenderer:m,loggingProvider:M,onAriaChange:D,onBlur:x,onEntriesUpdated:P,onFocus:r("emptyFunction"),onSelectedEntry:N,onVisibilityChange:$,position:v,queryString:R.searchResult.matchingString,ref:T,viewStrategyRenderer:S})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=_(!1),n=t[0],r=t[1];return d(function(){if(n){var t=e.getEditorState().read(o("LexicalText").$rootTextContent);return e.registerTextContentListener(function(e){e!==t&&r(!1),t=e})}},[e,n]),m(function(){return[n,function(){return r(!0)}]},[n])}function h(e,t,n){for(var r=n,o=r;o<=t.length;o++)e.substr(-o)===t.substr(0,o)&&(r=o);return r}function y(e,t,n,r,a){e.update(function(){var e=o("Lexical").$getSelection();if(!(!o("Lexical").$isRangeSelection(e)||!e.isCollapsed())){var i=e.anchor;if(i.type==="text"){var l=i.getNode();if(!(a!=null&&!a()||a==null&&!l.isSimpleText())){var s=i.offset,u=l.getTextContent().slice(0,s),c=n.label,d=r.replaceableString.length,m=h(u,c,d),p=s-m;p<0||t({anchorNode:l,endOffset:s,selectedEntry:n,startOffset:p})}}}})}function C(e){var t=p(void 0),n=p(void 0);return c(function(r,a){var i=t.current,l=n.current;(i!==r||l!==a)&&(t.current=r,n.current=a,e.dispatchCommand(o("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:r,controlsID:a}))},[e])}l.default=f}),98);
__d("CometMentionsViewListStrategy.react",["CometCompositeStructureContext","FDSText.react","getItemRoleFromCompositeRole","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"],s,u=s||(s=o("react")),c=s.useMemo;function d(t){var n=t.ariaProps,o=t.entries,a=t.extraViewProps,i=t.highlightedEntry,l=t.isLoading,s=t.onAbandonTypeahead_DO_NOT_USE,d=t.viewItemStrategyRenderer,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p=n.role,_=c(function(){return p!=null?{role:p}:{}},[p]),f=r("getItemRoleFromCompositeRole")(p);return u.jsx("ul",babelHelpers.extends({},n,{className:"x78zum5 xdt5ytf x1iyjqo2","data-testid":void 0,children:u.jsx(r("CometCompositeStructureContext").Provider,{value:_,children:o.map(function(e,t){if(e.type==="section"){var n=e.entries,a=e.key,l=e.label;return n.length===0?null:u.jsxs("li",{"aria-selected":"false",role:"option",children:[u.jsx("div",{className:"x889kno x2vl965 x1a8lsjc xe2zdcy",children:u.jsx("label",{htmlFor:a,children:u.jsx(r("FDSText.react"),{color:"primary",type:"entityHeaderMeta2",children:l})})}),u.jsx("ul",{id:a,role:"listbox",children:n.map(function(e){return u.createElement(d,babelHelpers.extends({},m,{entry:e,isActive:e.key===(i==null?void 0:i.key),key:e.key,role:f}))})})]},"section-"+a)}else return u.createElement(d,babelHelpers.extends({},m,{entry:e,isActive:e.key===(i==null?void 0:i.key),isFirstItem:t===0,isLastItem:t===o.length-1,key:e.key,role:f}))})})}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(t,n,r,o,a,i){"use strict";var e=["photo","video","file"],l=e;i.default=l}),66);
__d("useCometLexicalDragAndDrop",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t){var n=t.onDragEnter,r=t.onDragLeave,o=t.onDragOver,a=t.onDrop,i=t.onPaste;s(function(){if(e!=null)return e.registerRootListener(function(e,t){t!=null&&(n&&t.removeEventListener("dragenter",n),r&&t.removeEventListener("dragleave",r),o&&t.removeEventListener("dragover",o),a&&t.removeEventListener("drop",a,!0),i&&t.removeEventListener("paste",i,!0)),e!==null&&(n&&e.addEventListener("dragenter",n),r&&e.addEventListener("dragleave",r),o&&e.addEventListener("dragover",o),a&&e.addEventListener("drop",a,!0),i&&e.addEventListener("paste",i,!0))})},[e,n,r,o,a,i])}l.default=u}),98);
__d("useCometLexicalFileDragAndDrop",["react","useCometLexicalDragAndDrop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e){var t=e.editor,n=e.isMimeTypeAcceptable,o=e.onHover,a=o===void 0?function(){}:o,i=e.onSubmit,l=i===void 0?function(){}:i,s=c(0),d=u(function(e){return Array.from(e).filter(n)},[n]),m=u(function(e){s.current++;var t=e.dataTransfer;if(t==null)return a([],!0);var n=d(t.items);return n.length>0&&e.preventDefault(),a(n,!0)},[d,a]),p=u(function(e){if(s.current--,s.current===0)return a([],!1)},[a]),_=u(function(e){var t=e.dataTransfer;if(t==null)return a([],!0);var n=d(t.items);return n.length>0&&e.preventDefault(),a(n,!0)},[d,a]),f=u(function(e,t){var n=d(t.items),r=n.map(function(e){return e.getAsFile()}).filter(Boolean);return r.length>0?(e.stopPropagation(),e.preventDefault(),l(r)):l([])},[d,l]),g=u(function(e){var t=e.dataTransfer;return s.current=0,a([],!1),t!=null?f(e,t):l([])},[f,a,l]),h=u(function(e){var t=e.clipboardData;if(t==null)return l([]);var n=t.types,r=n.includes("text/plain")&&n.includes("text/html")||n.includes("text/rtf");return r?l([]):f(e,t)},[f,l]);r("useCometLexicalDragAndDrop")(t,{onDragEnter:m,onDragLeave:p,onDragOver:_,onDrop:g,onPaste:h})}l.default=d}),98);
__d("useCometMessengerFileUploadPaste",["react","useCometLexicalFileDragAndDrop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.editor,n=e.handlePastedFiles,o=e.isMimeTypeAcceptable,a=s(function(e){e.length>0&&n(e)},[n]);r("useCometLexicalFileDragAndDrop")({editor:t,isMimeTypeAcceptable:o,onSubmit:a})}l.default=u}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","useCometMessengerFileUploadPaste"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.kind!=="file")return!1;for(var t of r("cometMessengerFileUploadComposerPluginSupportedTypes"))switch(t){case"photo":if(o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e.type))return!0;break;case"video":if(o("cometIsMimeTypeForMedia").isMimeTypeForVideo(e.type))return!0;break;case"file":if(o("cometIsMimeTypeForMedia").isMimeTypeForFile(e.type))return!0;break;default:}return!1}function s(t){var n=t.editor,o=t.handlePastedFiles;return r("useCometMessengerFileUploadPaste")({editor:n,handlePastedFiles:o,isMimeTypeAcceptable:e}),null}l.default=s}),98);
__d("useCometInternalTypeaheadState",["CometInternalTypeaheadStateContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometInternalTypeaheadStateContext"))}l.default=u}),98);
__d("CometTypeaheadViewItem.react",["CometPressable.react","CometRow.react","CometRowItem.react","emptyFunction","react","react-strict-dom","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c={root:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginBottom:"xat24cr",marginTop:"xdj266r",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}},d={contentRoot:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},contentRootDisabled:{bottom:"x1ey2m1c",cursor:"x1h6gzvc",left:"xu96u03",position:"x10l6tqk",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,top:"x13vifvy",$$css:!0},contentRootEmphasized:{backgroundColor:"xlhe6ec",$$css:!0},contentRootFocused:{boxShadow:"xpud6h4",outline:"x1a2a7pz xvetz19",$$css:!0},contentRootHighlighted:{backgroundColor:"x1wpzbip xugaqoy",$$css:!0},itemIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",$$css:!0},pressable:{flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0},pressableWithAdditionalEndContent:{flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",$$css:!0},root:{display:"x78zum5",width:"xh8yej3",$$css:!0}};function m(e){var t=e.additionalEndContentOutsideOfPressable,n=e.children,a=e.cursorDisabled_SEARCH_ONLY,i=a===void 0?!1:a,l=e.entry,m=e.isActive,p=e.isEmphasized,_=p===void 0?!1:p,f=e.isDisabled,g=f===void 0?!1:f,h=e.itemEndContent,y=e.itemStartContent,C=e.linkProps,b=e.onHighlightEntry,v=e.onPressEntry,S=e.onPressEntryIn,R=e.overlayDisabled_SEARCH_ONLY,L=R===void 0?!1:R,E=e.role,k=e.testid,I=e.xstyle,T=I===void 0?c.root:I,D=e.debugElement,x=e.focusable,$=x===void 0?!1:x,P=e.itemEndContentKeyboardFocusable,N=P===void 0?!1:P,M=r("useCometInternalTypeaheadState")(),w=M.secondaryActionHighlighted,A=u(function(e){v&&v(l,e)},[l,v]),F=u(function(e){S&&S(l,e)},[l,S]),O=E==="row"?"gridcell":"none";return s.jsxs(o("react-strict-dom").html.li,{"aria-selected":m,"data-testid":void 0,id:N===!0&&O==="gridcell"?void 0:l.key,role:E,style:d.root,children:[D,s.jsxs(r("CometPressable.react"),{"aria-describedby":l.key,cursorDisabled:i,disabled:g,display:"block",expanding:!0,focusable:$,label:l.label,linkProps:C,onPress:g?r("emptyFunction"):A,onPressIn:g?r("emptyFunction"):F,overlayDisabled:L,overlayFocusRingPosition:"inset",role:N!==!0?O:"none",xstyle:[d.contentRoot,m&&d.contentRootHighlighted,m&&w!==!0&&d.contentRootFocused,_&&d.contentRootEmphasized,T,t==null?d.pressable:d.pressableWithAdditionalEndContent],children:[s.jsxs(r("CometRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[y!=null?s.jsx(r("CometRowItem.react"),{children:s.jsx(o("react-strict-dom").html.div,{style:d.itemIcon,children:y})}):null,s.jsx(r("CometRowItem.react"),{expanding:!0,children:N===!0&&O==="gridcell"?s.jsx(o("react-strict-dom").html.div,{id:l.key,role:O,children:n}):n}),h!=null?s.jsx(r("CometRowItem.react"),{children:N===!0&&O==="gridcell"?s.jsx(o("react-strict-dom").html.div,{id:l.key+"-secondary-action",role:O,children:h}):h}):null]}),t,s.jsx(o("react-strict-dom").html.div,{style:g&&d.contentRootDisabled})]})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPressEntryIn","queryString"],s,u=s||(s=o("react"));function c(t){var n=t.onPressEntryIn,o=t.queryString,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=function(t,r){r.preventDefault(),n&&n(t,r)};return u.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},a,{onPressEntryIn:i}))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("useCometInternalTypeaheadFetch",["CometInternalTypeaheadFetchContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometInternalTypeaheadFetchContext"))}l.default=u}),98);
__d("useCometTypeaheadViewLabel",["fbt","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useMemo;function c(e){var t=e.activeEntries;return u(function(){var e=t.length;return e===0?s._(/*BTDS*/"No suggested searches."):s._(/*BTDS*/"_j{\"*\":\"{number} suggested searches\",\"_1\":\"1 suggested search\"}",[s._plural(e,"number")])},[t])}l.default=c}),226);
__d("useCometTypeaheadLayoutContextualStrategyARIAProps",["react","useCometInternalTypeaheadFetch","useCometTypeaheadViewLabel"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useId,c=s.useMemo;function d(e){var t=e.activeEntries,n=e.helperText,o=e.highlightedEntry,a=e.inputLabel,i=a===void 0?"":a,l=e.isOpened,s=e.secondaryActionHighlighted,d=e.viewRole,m=u(),p=r("useCometInternalTypeaheadFetch")(),_=p.isLoading,f=u(),g=r("useCometTypeaheadViewLabel")({activeEntries:t});return c(function(){var e=o!=null?{"aria-activedescendant":s===!0?o.key+"-secondary-action":o.key}:{},r=l&&t.length>0?{"aria-controls":m}:null,a=n!=null&&String(n).length>0?{"aria-describedby":f}:null,u={"aria-busy":_,"aria-label":g,id:m,role:d};return{ariaDescribedByProps:{id:f},ariaInputProps:babelHelpers.extends({},e,r,a,{"aria-autocomplete":"list","aria-expanded":t.length>0&&l,"aria-label":i,role:"combobox"}),ariaViewProps:u}},[t.length,f,n,o,i,_,l,m,s,g,d])}l.default=d}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=e.entries,n=e.highlightedEntry,o=e.onAriaChange,a=r("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:r("baseTypeaheadFlattenEntries")(t),helperText:"",highlightedEntry:n,inputLabel:"",isOpened:!0,viewRole:"listbox"}),i=a.ariaInputProps,l=a.ariaViewProps;return s(function(){return o(i["aria-activedescendant"],i["aria-controls"])},[i,o]),l}l.default=u}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","useBaseMentionsLayoutStrategyARIAProps.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading","isLoadingIndicatorEnabled","onAriaChange","viewStrategyRenderer"],s,u=s||(s=o("react"));function c(t){var n=t.isLoading,o=t.isLoadingIndicatorEnabled,a=o===void 0?!1:o,i=t.onAriaChange,l=t.viewStrategyRenderer,s=babelHelpers.objectWithoutPropertiesLoose(t,e),c=r("useBaseMentionsLayoutStrategyARIAProps.react")({entries:s.entries,highlightedEntry:s.highlightedEntry,onAriaChange:i});return u.jsxs("div",{children:[u.jsx(l,babelHelpers.extends({},s,{ariaProps:c,isLoading:a?n:!1})),!n&&s.entries.length===0?u.jsx(r("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null]})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("CometTypeaheadProgressGlimmer.react",["FDSProgressRingIndeterminate.react","react","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={root:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",height:"xdd8jsf",justifyContent:"xl56j7k",$$css:!0}};function c(){return s.jsx(o("react-strict-dom").html.div,{style:u.root,children:s.jsx(r("FDSProgressRingIndeterminate.react"),{color:"dark",size:24})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("DocumentMentionsRegex",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s={PUNCTUATION:e,NAME:l},u=s;i.default=u}),66);
__d("IGDAudioRecorderSelector.react",["cr:7490","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));l.default=n("cr:7490")}),98);
__d("IGDMentionsLayoutStrategy.react",["CometContextualLayer.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","IGDSPopover.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","context","entries","isLoading","onBlur","position","viewRef"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(19),a,i,l,s,c;if(n[0]!==t){var d=t.ariaProps,m=t.context,p=t.entries,_=t.isLoading,f=t.onBlur,g=t.position,h=t.viewRef,y=babelHelpers.objectWithoutPropertiesLoose(t,e);a=d,i=m,l=p,s=g,c=y,n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c}else a=n[1],i=n[2],l=n[3],s=n[4],c=n[5];var C=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),b;n[6]!==C?(b={eventName:"mentions_popover_rendered",flowInstanceId:C},n[6]=C,n[7]=b):b=n[7];var v=r("MessengerWebUXLogger").useImpressionLoggerRef(b);if(l.length===0)return null;var S;n[8]!==a||n[9]!==l||n[10]!==c?(S=u.jsx(r("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),babelHelpers.extends({ariaProps:a,entries:l,isLoading:!1},c)),n[8]=a,n[9]=l,n[10]=c,n[11]=S):S=n[11];var R;n[12]!==v||n[13]!==S?(R=u.jsx(r("IGDSPopover.react"),{popoverContent:S,ref:v}),n[12]=v,n[13]=S,n[14]=R):R=n[14];var L;return n[15]!==i||n[16]!==s||n[17]!==R?(L=u.jsx(r("CometContextualLayer.react"),{align:"start",context_DEPRECATED:i,position:s,children:R}),n[15]=i,n[16]=s,n[17]=R,n[18]=L):L=n[18],L}l.default=c}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t){var n=t.anchorNode,o=t.endOffset,a=t.selectedEntry,i=t.startOffset,l;if(i===0){var s=n.splitText(o);l=s[0]}else{var u=n.splitText(i,o);l=u[1]}if(l==null){r("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+i+", "+o+".");return}var c=e(a);c.setStyle(l.getStyle()),l.replace(c),c.selectNext(0,0)}}l.default=e}),98);
__d("cometMentionsDataEntryText",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return(t=e.handle)!=null?t:e.label}i.default=e}),66);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(t,n,r,o,a,i,l){"use strict";var e="(?:\\.[ |$]| |["+r("DocumentMentionsRegex").PUNCTUATION+"]|)",s=75;function u(e,t,n){var r="[^"+e+t+"\\s]",o=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+n+"){0,"+s+"}))$"),a=50,i=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+"){0,"+a+"}))$");return{regex:o,regexAlias:i}}function c(t){var n=t.minMatchLength,o=t.name,a=t.triggers,i=t.disallowedChars,l=i===void 0?r("DocumentMentionsRegex").PUNCTUATION:i,s=t.disallowedTerms,c=t.validJoins,d=c===void 0?e:c,m=u(a,l,d),p=m.regex,_=m.regexAlias;return{findMentionableString:function(t){var e=p.exec(t);if(e===null&&(e=_.exec(t)),e!==null){var r=e[1],o=e[3];if(s!=null&&s.includes(o.toLowerCase()))return null;if(o.length>=n)return{leadOffset:e.index+r.length,matchingString:o,replaceableString:e[2]}}return null},name:o}}l.default=c}),98);
__d("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport",["createCometMentionMatchStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=["@","\\uff20"].join(""),s=",\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>:;",u="(?:\\.[ |$]|[ ]['\"]|['\"][ |$]| |["+s+"]|)";function c(t){var n=t.disallowedTerms,o=t.minMatchLength;return r("createCometMentionMatchStrategy")({disallowedChars:s,disallowedTerms:n,minMatchLength:o,name:"CometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport("+o.toString()+")",triggers:e,validJoins:u})}l.default=c}),98);
__d("useCometMentionsDataSourceResolverConfig",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useMemo;function m(e,t){var n=u(function(){e.forEach(function(e){var t=e.dataSource;t.bootstrap()})},[e]);return c(function(){t&&n()},[t,n]),d(function(){var t=new Map;return{bootstrap:n,resolver:function(r){var n={dataSource:null,searchResult:null};if(r==null)return n;var o=t.get(r);if(o!=null)return o;for(var a=0;a<e.length;a++){var i=e[a],l=i.dataSource,s=i.matchStrategy,u=s.findMentionableString(r);if(u!=null){var c={dataSource:l,searchResult:u};return t.set(r,c),c}}return t.set(r,n),n}}},[e,n])}l.default=m}),98);
__d("useCometMentionsViewListStrategy",["CometMentionsViewListStrategy.react","CometTypeaheadProgressGlimmer.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=t.viewItemStrategyRenderer;return c(function(t){var o=t.isLoading,a=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.jsxs(u.Fragment,{children:[u.jsx(r("CometMentionsViewListStrategy.react"),babelHelpers.extends({},a,{isLoading:!1,viewItemStrategyRenderer:n})),o&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})},[n])}l.default=d}),98);